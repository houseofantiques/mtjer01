<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="color-scheme" content="dark"/>
  <title>متجر بيت التحفيات</title>

  <link rel="stylesheet" href="styles.css" />
</head>

<body>

  <!-- TOP BAR (clean) -->
  <header class="topbar" role="banner">
    <div class="topbarLeft">
      <select id="langSelect" class="selectMini" aria-label="Language">
        <option value="ar">AR</option>
        <option value="en">EN</option>
        <option value="ku">KU</option>
      </select>
    </div>

    <div class="topbarRight">
      <div class="logo" aria-hidden="true"></div>
    </div>
  </header>

  <!-- HERO (SEPARATE + STICKY) -->
  <section class="hero heroSticky" aria-label="Cover">
    <div class="heroSlider" id="heroSlider" aria-label="Cover slider">
      <div class="heroTrack" id="heroTrack">
        <div class="heroSlide"><img src="cover1.jpg" alt=""></div>
        <div class="heroSlide"><img src="cover2.jpg" alt=""></div>
        <div class="heroSlide"><img src="cover3.jpg" alt=""></div>
        <div class="heroSlide"><img src="cover4.jpg" alt=""></div>
        <div class="heroSlide"><img src="cover5.jpg" alt=""></div>
        <div class="heroSlide"><img src="cover6.jpg" alt=""></div>
        <div class="heroSlide"><img src="cover7.jpg" alt=""></div>
        <div class="heroSlide"><img src="cover8.jpg" alt=""></div>
      </div>

      <!-- Overlay -->
      <div class="heroOverlay">
        <div class="heroKicker">بيت التحفيات • House of Antiques</div>
        <h1 class="heroTitle">ANTIQUE STORE</h1>
        <div class="heroOrnament" aria-hidden="true"></div>
      </div>

      <div class="heroDots" id="heroDots" aria-hidden="true"></div>
    </div>
  </section>

  <!-- FILTERS -->
  <section class="filters">
    <div class="searchRow">
      <input
        id="searchInput"
        class="search"
        type="search"
        inputmode="search"
        autocomplete="off"
        placeholder="ابحث بالكود أو الاسم..."
      />
      <div id="resultsCount" class="count">0 نتائج</div>
    </div>

    <!-- Featured row (between search and categories) -->
    <div id="featuredWrap" class="featuredWrap"></div>

    <!-- CATEGORY CHIPS -->
    <div id="chipsWrap" class="chips" aria-label="Categories"></div>

    <!-- SORT + SHOW -->
    <div class="selectsRow">
      <select id="sortSelect" class="select" aria-label="Sort">
        <option value="featured">Featured</option>
        <option value="newest">Newest</option>
        <option value="priceAsc">Price ↑</option>
        <option value="priceDesc">Price ↓</option>
      </select>

      <select id="showSelect" class="select" aria-label="Show">
        <option value="all">الكل</option>
        <option value="fav">المفضلة</option>
      </select>
    </div>
  </section>

  <!-- GRID -->
  <main class="page">
    <div id="productsGrid" class="grid" aria-live="polite"></div>
    <div id="emptyState" class="empty" style="display:none;">لا توجد نتائج</div>
  </main>

  <!-- MODAL -->
  <div class="modal" id="modal" aria-hidden="true">
    <div class="modalDialog" role="dialog" aria-modal="true" aria-label="Product details">
      <button class="modalClose" id="modalClose" type="button">إغلاق</button>

      <div id="modalBody" class="modalBody">
        <div class="pinMedia" id="pinMedia">
          <img id="modalMainImg" src="" alt="" />
        </div>

        <div class="pinBar">
          <div class="pinPrice" id="pinPrice">—</div>

          <div class="pinIcons">
            <button class="pinIcon" type="button" id="favBtn" aria-label="fav">♡</button>
            <button class="pinIcon" type="button" id="shareWaBtn" aria-label="share">⤴</button>
            <button class="pinIcon" type="button" id="copyLinkBtn" aria-label="link">⋯</button>
          </div>
        </div>

        <div class="pinMeta">
          <div class="pinTitleRow">
            <h3 class="pinTitle" id="modalTitle">—</h3>
            <span class="badge auction" id="modalBadge" style="display:none;">مزاد</span>
          </div>

          <div class="pinMini">
            <span>Code:</span> <span id="modalCode">—</span>
            <span class="dot">•</span>
            <span id="modalStatus">—</span>
          </div>
        </div>

        <div class="pinToggles">
          <button class="toggle active" type="button" id="pinDetailsToggle">تفاصيل</button>
          <button class="toggle" type="button" id="pinOrderToggle">اطلب</button>
        </div>

        <div class="pinDetails" id="pinDetails">
          <div class="pinDims" id="pinDimsWrap" style="display:none;">
            <strong>Dimensions:</strong>
            <span id="itemDimensions"></span>
          </div>

          <div class="pinDesc is-collapsed" id="pinDesc">—</div>
          <button class="pinMore" type="button" id="pinMoreBtn" style="display:none;">اضغط للمزيد</button>
        </div>

        <section class="pinOrder" id="pinOrderPanel" style="display:none;">
          <div class="formTitle">بيانات الزبون</div>

          <div class="formGrid">
            <div class="field">
              <label>الاسم الكامل</label>
              <input id="orderName" type="text" placeholder="مثال: طارق محمد علي" />
            </div>

            <div class="field">
              <label>رقم الهاتف</label>
              <input id="orderPhone" type="tel" placeholder="مثال: 7701234567" />
            </div>

            <div class="field">
              <label>البريد الإلكتروني</label>
              <input id="orderEmail" type="email" placeholder="example@email.com" />
            </div>

            <div class="field">
              <label>المحافظة</label>
              <input id="orderGov" type="text" placeholder="مثال: بغداد" />
            </div>

            <div class="field">
              <label>المنطقة</label>
              <input id="orderArea" type="text" placeholder="مثال: أبو نؤاس" />
            </div>

            <div class="field full">
              <label>أقرب نقطة دالة (اختياري)</label>
              <input id="orderLandmark" type="text" placeholder="قرب مجمع كورنيش أبو نؤاس" />
            </div>

            <div class="field full">
              <label>ملاحظات (اختياري)</label>
              <textarea id="orderNotes" rows="3" placeholder="مثال: أريد معاينة القطعة..."></textarea>
            </div>
          </div>

          <div class="formActions">
            <button class="btn primary" type="button" id="orderWhatsApp">ارسال الطلب</button>
            <button class="btn" type="button" id="copyOrder">نسخ تفاصيل الطلب</button>
          </div>
        </section>

        <div class="similarWrap" id="similarProducts"></div>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script src="products.js" defer></script>
  <script src="script.js" defer></script>

  <!-- ✅ Simple lang/dir sync (no conflicts) -->
  <script defer>
    (function(){
      const sel = document.getElementById("langSelect");
      if(!sel) return;

      const saved = localStorage.getItem("hoa_lang_v6") || localStorage.getItem("hoa_lang");
      if(saved) sel.value = saved;

      const apply = (lang) => {
        document.documentElement.lang = lang;
        document.documentElement.dir  = (lang === "en") ? "ltr" : "rtl";
      };

      apply(sel.value);
      sel.addEventListener("change", () => apply(sel.value));
    })();
  </script>

</body>
</html>
