<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>بيت التحفيات | قطع المزاد</title>

  <!-- Cairo Font -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="styles.css" />
</head>

<body>
  <!-- ✅ يعرّف للـ JS إن هذه صفحة مزاد -->
  <script>
    window.HOA_PAGE_MODE = "auction";
  </script>

  <!-- Top Bar -->
  <header class="topbar">
    <div class="container topbar__inner">
      <div class="brand">
        <div class="brand__logo" aria-hidden="true">B</div>
        <div class="brand__text">
          <div class="brand__title">بيت التحفيات</div>
          <div class="brand__sub">قائمة قطع المزاد</div>
        </div>
      </div>

      <div class="topbar__actions">
        <button class="iconbtn" id="themeBtn" type="button" aria-label="تبديل المظهر">
          <span class="icon">☾</span>
        </button>

        <a class="ghostbtn" href="index.html">الرجوع للمتجر</a>

        <!-- ✅ زر الحجز -->
        <a class="primarybtn"
           href="https://houseofantiques.github.io/Booking-/"
           target="_blank" rel="noopener">
          احجز مقعدك
        </a>
      </div>
    </div>
  </header>

  <!-- Hero -->
  <section class="hero">
    <div class="container">
      <div class="hero__inner">

        <div class="hero__copy">
          <h1>قطع المزاد القادم</h1>
          <p>
            استعرض القطع المشاركة في المزاد مع الصور والتفاصيل.
            للحجز اضغط زر <strong>احجز مقعدك</strong>.
          </p>

          <div class="hero__search">
            <div class="searchbox">
              <span class="searchbox__icon">⌕</span>
              <input id="searchInput" type="search" placeholder="ابحث بأسم القطعة أو الكود..." autocomplete="off" />
            </div>

            <div class="chips" id="categoryChips" aria-label="التصنيفات"></div>
          </div>
        </div>

        <aside class="hero__card" aria-label="معلومات المزاد">
          <div class="hero__stat">
            <div class="hero__statNum" id="countItems">0</div>
            <div class="hero__statLabel">قطعة ضمن المزاد</div>
          </div>

          <div class="hero__note">
            <div class="hero__noteTitle">تنبيه</div>
            <div class="hero__noteText">
              يتم تحديث القطع المشاركة باستمرار حسب التجهيز.
            </div>
          </div>

          <!-- ✅ زر الحجز داخل الكارد (اختياري بس مفيد) -->
          <a class="primarybtn"
             href="https://houseofantiques.github.io/Booking-/"
             target="_blank" rel="noopener"
             style="width:100%; margin-top:12px; text-align:center;">
            احجز مقعدك الآن
          </a>

          <a class="ghostbtn"
             href="index.html"
             style="width:100%; margin-top:10px; text-align:center;">
            رجوع للمتجر
          </a>
        </aside>

      </div>
    </div>
  </section>

  <!-- Products -->
  <main class="container main">
    <div class="toolbar">
      <div class="toolbar__left">
        <div class="toolbar__title">قطع المزاد</div>
        <div class="toolbar__subtitle" id="resultsHint">—</div>
      </div>

      <div class="toolbar__right">
        <label class="select">
          <span class="select__label">الترتيب</span>
          <select id="sortSelect">
            <option value="featured">مميز</option>
            <option value="priceAsc">السعر: من الأقل للأعلى</option>
            <option value="priceDesc">السعر: من الأعلى للأقل</option>
            <option value="newest">الأحدث</option>
          </select>
        </label>

        <label class="select">
          <span class="select__label">عرض</span>
          <select id="viewSelect">
            <option value="all">الكل</option>
            <option value="favorites">المفضلة</option>
          </select>
        </label>
      </div>
    </div>

    <section class="grid" id="productsGrid" aria-live="polite"></section>
  </main>

  <!-- Product Modal -->
  <div class="modal" id="productModal" aria-hidden="true">
    <div class="modal__backdrop" data-close="true"></div>

    <div class="modal__panel" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
      <div class="modal__header">
        <button class="modal__close" type="button" data-close="true" aria-label="إغلاق">✕</button>
      </div>

      <div class="modal__content">
        <div class="modal__media">
          <img id="modalMainImg" alt="صورة القطعة" />
          <div class="thumbs" id="modalThumbs" aria-label="صور إضافية"></div>
        </div>

        <div class="modal__details">
          <div class="badgesRow">
            <div class="badge" id="modalCategory">—</div>
            <div class="badge status-badge" id="modalStatus">—</div>
            <button class="favbtn" type="button" id="favBtn" aria-label="إضافة للمفضلة">♡</button>
          </div>

          <h2 id="modalTitle">—</h2>

          <div class="meta">
            <div class="meta__item">
              <span class="meta__label">الكود</span>
              <span class="meta__value" id="modalCode">—</span>
            </div>
            <div class="meta__item">
              <span class="meta__label">السعر</span>
              <span class="meta__value" id="modalPrice">—</span>
            </div>
          </div>

          <div class="tabs" role="tablist" aria-label="عرض المعلومات">
            <button class="tab is-active" id="tabDetails" type="button" role="tab" aria-selected="true">تفاصيل</button>
            <button class="tab" id="tabOrder" type="button" role="tab" aria-selected="false">اطلب</button>
          </div>

          <section id="detailsSection">
            <p class="desc" id="modalDesc">—</p>

            <div class="shareRow" aria-label="مشاركة القطعة">
              <button class="ghostbtn" type="button" id="shareWAItemBtn">مشاركة واتساب</button>
              <button class="ghostbtn" type="button" id="copyLinkBtn">نسخ الرابط</button>
              <button class="ghostbtn" type="button" id="nativeShareBtn">مشاركة</button>
            </div>

            <div class="suggestedWrap" id="suggestedWrap">
              <div class="suggestedTitle">اقتراحات مشابهة</div>
              <div class="suggestedGrid" id="suggestedGrid"></div>
            </div>
          </section>

          <section id="orderSection" hidden>
            <!-- نفس الفورم -->
            <hr class="sep" />
            <h3 class="formTitle">بيانات الزبون</h3>

            <form class="form" id="orderForm">
              <div class="form__row">
                <label>
                  <span>الاسم الكامل</span>
                  <input type="text" id="custName" required placeholder="مثال : طارق محمد علي">
                </label>

                <label>
                  <span>رقم الهاتف</span>
                  <input type="tel" id="custPhone" required placeholder="07xxxxxxxxx">
                </label>
              </div>

              <div class="form__row">
                <label>
                  <span>المحافظة</span>
                  <input type="text" id="custGov" required placeholder="مثال: بغداد">
                </label>

                <label>
                  <span>المنطقة</span>
                  <input type="text" id="custArea" required placeholder="مثال: ابو نؤاس">
                </label>
              </div>

              <label>
                <span>أقرب نقطة دالة</span>
                <input type="text" id="custLandmark" placeholder="مثال: قرب مجمع كورنيش ابو نؤاس">
              </label>

              <label>
                <span>ملاحظات (اختياري)</span>
                <textarea id="custNote" rows="3" placeholder="مثال: اريد معاينة القطعة / تغليف هدية..."></textarea>
              </label>

              <div class="form__actions">
                <button class="primarybtn" type="submit" id="orderSubmitBtn">اطلب عبر واتساب</button>
                <button class="ghostbtn" type="button" id="copyDetailsBtn">نسخ تفاصيل الطلب</button>
              </div>

              <div class="status" id="formStatus" role="status" aria-live="polite"></div>
            </form>
          </section>

        </div>
      </div>
    </div>
  </div>

  <footer class="footer">
    <div class="container footer__inner">
      <div>© <span id="year"></span> بيت التحفيات</div>
      <div class="footer__links">
        <a href="#" id="footerWhatsApp">House of Antiques</a>
        <span class="dot">•</span>
        <span>بغداد - ابو نؤاس / للذاكرة، للتوثيق، وللأثر</span>
      </div>
    </div>
  </footer>

  <button id="mobileOrderBtn" class="mobile-order-btn" type="button">اطلب الآن</button>

  <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
  <script src="script.js" defer></script>
</body>
</html>
